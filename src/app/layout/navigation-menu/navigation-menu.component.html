<div class="menu-wrapper"
     [class.slim]="app.sidenav.collapsed">
  <div class="app-menu-toolbar">
    <svg-icon icon="arrow-toggle"
              class="arrow-toggle"
              [class.slim]="app.sidenav.collapsed"
              (click)="toggleMenuSize()"></svg-icon>
    <div class="app-menu-toolbar-logo text-nowrap">TezEdge</div>
  </div>

  <ng-container *ngIf="appFeatures$ | async as features">
    <div class="app-submenu"
         *ngIf="features['monitoring'] || haveResources">
      <div class="text-nowrap">MONITORING</div>

      <a *ngIf="features['monitoring']"
         mat-list-item
         class="menu-item"
         id="monitoring-trigger"
         routerLink="/monitoring"
         routerLinkActive="active"
         matTooltip="Synchronization"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="history"></svg-icon>
        <span class="text-nowrap">Synchronization</span>
      </span>
      </a>

      <a *ngIf="haveResources"
         mat-list-item
         class="menu-item"
         routerLink="/resources"
         routerLinkActive="active"
         id="resources-trigger"
         matTooltip="Resources"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="resources"></svg-icon>
        <span class="text-nowrap">Resources</span>
      </span>
      </a>

    </div>

    <div *ngIf="haveExplorer"
         class="app-submenu">
      <div class="text-nowrap">EXPLORER</div>

      <a *ngIf="features['mempool']"
         mat-list-item
         class="menu-item"
         routerLink="/mempool"
         routerLinkActive="active"
         id="mempool-trigger"
         matTooltip="Mempool"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="mempool"></svg-icon>
        <span class="text-nowrap">Mempool</span>
      </span>
      </a>

      <a *ngIf="features['storage']"
         mat-list-item
         class="menu-item"
         routerLink="/storage"
         routerLinkActive="active"
         id="storage-trigger"
         matTooltip="Storage"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="storage"></svg-icon>
        <span class="text-nowrap">Storage</span>
      </span>
      </a>

      <a *ngIf="features['network']"
         mat-list-item
         class="menu-item"
         routerLink="/network"
         routerLinkActive="active"
         id="network-trigger"
         matTooltip="Network"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="peer"></svg-icon>
        <span class="text-nowrap">Network</span>
      </span>
      </a>
      <a *ngIf="features['endpoints']"
         mat-list-item
         class="menu-item"
         routerLink="/endpoints"
         routerLinkActive="active"
         id="endpoints-trigger"
         matTooltip="Endpoints"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="endpoints"></svg-icon>
        <span class="text-nowrap">Endpoints</span>
      </span>
      </a>

      <a *ngIf="features['logs']"
         mat-list-item
         class="menu-item"
         routerLink="/logs"
         routerLinkActive="active"
         id="logs-trigger"
         matTooltip="Logs"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         (click)="closeMenu()">
      <span class="menu-content">
        <svg-icon icon="logs"></svg-icon>
        <span class="text-nowrap">Logs</span>
      </span>
      </a>

<!--      <a *ngIf="features['state']"-->
<!--         mat-list-item-->
<!--         class="menu-item"-->
<!--         routerLink="/state"-->
<!--         routerLinkActive="active"-->
<!--         id="state-trigger"-->
<!--         matTooltip="State"-->
<!--         matTooltipPosition="right"-->
<!--         [matTooltipDisabled]="!app.sidenav.collapsed"-->
<!--         (click)="closeMenu()">-->
<!--      <span class="menu-content">-->
<!--        <svg-icon icon="logs"></svg-icon>-->
<!--        <span class="text-nowrap">State</span>-->
<!--      </span>-->
<!--      </a>-->
    </div>

    <!-- <div class="app-submenu">
        <span>
            DEVELOPER
        </span>

        <a mat-list-item class="menu-item" routerLink="/storage"
            [style.color]="app.sidenav.color">
            <span>
                Chain
            </span>
        </a>

        <a mat-list-item class="menu-item" routerLink="/storage"
            [style.color]="app.sidenav.color">
            <span>
                Replay
            </span>
        </a>

        <a mat-list-item class="menu-item" routerLink="/storage"
            [style.color]="app.sidenav.color">
            <span>
                Debug
            </span>
        </a>

        <a mat-list-item class="menu-item" routerLink="/storage"
        [style.color]="app.sidenav.color">
            <span>
                Error
            </span>
        </a>
    </div> -->

    <div class="app-submenu"
         *ngIf="false && haveSandbox">
      <!-- enable when we have sandbox working back -->
      <div class="text-nowrap">SANDBOX</div>

      <a *ngIf="features['chains']"
         mat-list-item
         id="chains-trigger"
         class="menu-item"
         routerLink="/chain"
         routerLinkActive="active"
         matTooltip="Chain"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         rel="noreferrer">
      <span class="menu-content">
        <svg-icon icon="chain-settings"></svg-icon>
        <span class="text-nowrap">Chain</span>
      </span>
      </a>

      <a *ngIf="features['wallets']"
         mat-list-item
         id="wallets-trigger"
         class="menu-item"
         routerLink="/wallets"
         routerLinkActive="active"
         matTooltip="Wallets"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         rel="noreferrer">
      <span class="menu-content">
        <svg-icon icon="chain-wallets"></svg-icon>
        <span class="text-nowrap">Wallets</span>
      </span>
      </a>

      <div class="sandbox-button">
        <button mat-flat-button
                (click)="addSandboxNode()"
                id="menu-add-sandbox-node">
          {{ app.sidenav.collapsed ? '+' : 'ADD SANDBOX NODE' }}
        </button>
      </div>

      <div *ngIf="settingsNode">
        <button mat-flat-button (click)="stopSandboxNode();"
                *ngIf="settingsNode.entities['sandbox-carthage-tezedge']?.connected === true">
          {{ app.sidenav.collapsed ? '+' : 'STOP SANDBOX NODE' }}
        </button>
      </div>
    </div>

    <div class="app-submenu">
      <div class="text-nowrap">DEVELOPMENT</div>

      <a mat-list-item
         class="menu-item"
         routerLink="/open-api"
         routerLinkActive="active"
         matTooltip="Open API"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         rel="noreferrer">
      <span class="menu-content">
        <svg-icon icon="swagger"></svg-icon>
        <span class="text-nowrap">Open API</span>
      </span>
      </a>
      <a mat-list-item
         class="menu-item"
         href="http://fuzz.tezedge.com"
         target="_blank"
         matTooltip="Fuzzing"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         rel="noreferrer">
      <span class="menu-content">
        <mat-icon svgIcon="fuzzing" class="icon-18"></mat-icon>
        <span class="text-nowrap">Fuzzing</span>
      </span>
      </a>
    </div>

    <div class="app-submenu">
      <div class="text-nowrap">LEARN</div>
      <a mat-list-item
         class="menu-item"
         href="https://docs.tezedge.com"
         target="_blank"
         matTooltip="Documentation"
         matTooltipPosition="right"
         [matTooltipDisabled]="!app.sidenav.collapsed"
         rel="noreferrer">
      <span class="menu-content">
        <svg-icon icon="documentation"></svg-icon>
        <span class="text-nowrap">Documentation</span>
      </span>
      </a>
    </div>

    <app-commit-number *ngIf="haveDebugger" class="app-github-version"></app-commit-number>
  </ng-container>
</div>
