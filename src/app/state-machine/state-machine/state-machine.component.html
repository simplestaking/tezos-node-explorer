<div class="state-machine w-100 overflow-hidden"
     *ngIf="state$ | async as stateMachine">
  <div class="d-flex flex-column h-100">
    <app-state-machine-filters fxFlex="32px"></app-state-machine-filters>
    <div fxFlex="calc(100% - 32px)" class="d-flex flex-column w-100 flex-between">
      <div class="upper-container"
           [style.transition]="transition"
           [class.collapsed]="stateMachine.collapsedDiagram"
           [style.height]="stateMachine.collapsedDiagram
                           ? '32px'
                           : (stateMachine.diagramHeight ? stateMachine.diagramHeight + 'px' : '40%')">
          <app-state-machine-diagram class="diagrams-container d-flex flex-column"></app-state-machine-diagram>
        <div *ngIf="!stateMachine.collapsedDiagram"
             class="resizer-element p-relative d-flex flex-center">
          <div class="mid-content d-flex flex-column align-center"
               resizer (resizeFinished)="onResizeFinished($event)">
            <mat-icon svgIcon="rounded-triangle" class="up icon-white-4 icon-10"></mat-icon>
            <div class="line"></div>
            <mat-icon svgIcon="rounded-triangle" class="down icon-white-4 icon-10"></mat-icon>
          </div>
        </div>
      </div>
      <div class="bottom-container flex-1" fxLayout.gt-sm="row" fxLayout.lt-md="column"
           [class.collapsed]="stateMachine.collapsedDiagram"
           [style.transition]="transition">
        <app-state-machine-table fxFlex.gt-sm="530px" fxFlex.lt-md="50%"></app-state-machine-table>
        <div fxFlex.gt-sm="calc(100% - 530px)" fxFlex.lt-md="50%">
          <app-state-machine-action-details></app-state-machine-action-details>
        </div>
      </div>
    </div>
  </div>
</div>
