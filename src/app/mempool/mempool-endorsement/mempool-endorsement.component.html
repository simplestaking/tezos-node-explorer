<div class="h-100" fxLayout="column" fxLayout.gt-md="row">
  <div class="h-100 d-flex flex-column overflow-auto border-bottom" fxFlex.gt-md="75">
    <div class="h-100 d-flex flex-column table-container">
      <div class="mempool-row head foreground-7 border-bottom">
        <span *ngFor="let tableHead of tableHeads"
              (click)="sortTable(tableHead.sort ?? tableHead.name)"
              class="pointer text-uppercase">{{ tableHead.name }}
          <mat-icon [class.flip]="currentSort.sortDirection === 'descending'"
                    [class.show]="currentSort.sortBy === (tableHead.sort ?? tableHead.name)"
                    [svgIcon]="'arrow-up'"
                    class="icon-14 icon-foreground"></mat-icon>
        </span>
      </div>
      <div class="f-14 overflow-y-auto overflow-x-hidden" fxFlex="calc(100% - 36px)" #scrollableContainer>
        <div *ngFor="let endorsement of endorsements$ | async; let i=index; trackBy: trackEndorsements"
             [@translateFromLeft]="i % 2 === 0 ? animateRows : false"
             [@translateFromRight]="i % 2 !== 0 ? animateRows : false"
             class="mempool-row pointer">
          <span [matTooltip]="'Slot numbers: ' + endorsement.slots?.join(', ')"
                matTooltipClass="endorsement"
                matTooltipPosition="below">{{ endorsement.slots?.length }}</span>
          <span class="d-flex align-center">
            <img *ngIf="endorsement.logo" [src]="endorsement.logo"
                 class="margin-right-10" alt=""
                 height="20px" width="20px">
            {{ endorsement.bakerName }}
          </span>
          <span class="moving-span padding-top-8">
            <span [ngClass]="endorsement.status || 'missing'"
                  class="status">{{ endorsement.status || 'missing' }}</span>
          </span>
          <ng-container *ngIf="endorsement.status; else missingTemplate">
            <span
              [ngClass]="(endorsement.delta || 0) < 20000000 ? '' : endorsement.delta < 50000000 ? 'text-yellow' : 'text-red'">
              {{ endorsement.delta | nanoTransform }}
            </span>
            <span>{{ endorsement.receiveTime | nanoTransform }}</span>
            <span>{{ endorsement.decodeTime | nanoTransform }}</span>
            <span>{{ endorsement.precheckTime | nanoTransform }}</span>
            <span>{{ endorsement.applyTime | nanoTransform }}</span>
            <span>{{ endorsement.broadcastTime | nanoTransform }}</span>
          </ng-container>
          <ng-template #missingTemplate>
            <span>-</span>
            <span>-</span>
            <span>-</span>
            <span>-</span>
            <span>-</span>
            <span>-</span>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-column" fxFlex.gt-md="25">
    <div class="details border-bottom d-flex align-center foreground-7" fxFlex="36px">STATISTICS</div>
    <app-mempool-endorsement-statistics class="border-left"
                                        fxFlex="calc(100% - 36px)"></app-mempool-endorsement-statistics>
  </div>
</div>
